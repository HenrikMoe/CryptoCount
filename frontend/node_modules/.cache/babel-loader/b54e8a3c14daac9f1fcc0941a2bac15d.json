{"ast":null,"code":"var _jsxFileName = \"/Users/chase/Desktop/CryptoProjects/CryptoCount-v2/frontend/src/components/Calendar/Calendar.js\";\nimport React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classes from \"./Calendar.module.css\";\nimport * as Styled from \"./styles\";\nimport calendar, { isDate, isSameDay, isSameMonth, getDateISO, getNextMonth, getPreviousMonth, WEEK_DAYS, CALENDAR_MONTHS } from \"../../helpers/calendar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Calendar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...this.resolveStateFromProp(),\n      today: new Date()\n    };\n\n    this.getCalendarDates = () => {\n      const {\n        current,\n        month,\n        year\n      } = this.state;\n      const calendarMonth = month || +current.getMonth() + 1;\n      const calendarYear = year || current.getFullYear();\n      return calendar(calendarMonth, calendarYear);\n    };\n\n    this.gotoDate = date => evt => {\n      evt && evt.preventDefault();\n      const {\n        current\n      } = this.state;\n      const {\n        onDateChanged\n      } = this.props;\n      !(current && isSameDay(date, current)) && this.setState(this.resolveStateFromDate(date), () => {\n        typeof onDateChanged === \"function\" && onDateChanged(date);\n      });\n    };\n\n    this.gotoPreviousMonth = () => {\n      const {\n        month,\n        year\n      } = this.state;\n      this.setState(getPreviousMonth(month, year));\n    };\n\n    this.gotoNextMonth = () => {\n      const {\n        month,\n        year\n      } = this.state;\n      this.setState(getNextMonth(month, year));\n    };\n\n    this.gotoPreviousYear = () => {\n      const {\n        year\n      } = this.state;\n      this.setState({\n        year: year - 1\n      });\n    };\n\n    this.gotoNextYear = () => {\n      const {\n        year\n      } = this.state;\n      this.setState({\n        year: year + 1\n      });\n    };\n\n    this.handlePressure = fn => {\n      if (typeof fn === \"function\") {\n        fn();\n        this.pressureTimeout = setTimeout(() => {\n          this.pressureTimer = setInterval(fn, 100);\n        }, 500);\n      }\n    };\n\n    this.clearPressureTimer = () => {\n      this.pressureTimer && clearInterval(this.pressureTimer);\n      this.pressureTimeout && clearTimeout(this.pressureTimeout);\n    };\n\n    this.clearDayTimeout = () => {\n      this.dayTimeout && clearTimeout(this.dayTimeout);\n    };\n\n    this.handlePrevious = e => {\n      e.shiftKey ? this.gotoPreviousYear() : this.gotoPreviousMonth();\n      e.preventDefault();\n    };\n\n    this.handleNext = e => {\n      e.shiftKey ? this.gotoNextYear() : this.gotoNextMonth();\n      e.preventDefault();\n    };\n\n    this.renderMonthAndYear = () => {\n      const {\n        month,\n        year\n      } = this.state;\n      const monthname = Object.keys(CALENDAR_MONTHS)[Math.max(0, Math.min(month - 1, 11))];\n      return /*#__PURE__*/_jsxDEV(Styled.CalendarHeader, {\n        children: [/*#__PURE__*/_jsxDEV(Styled.ArrowLeft, {\n          onClick: this.handlePrevious,\n          title: \"Previous Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Styled.CalendarMonth, {\n          children: [monthname, \" \", year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Styled.ArrowRight, {\n          onClick: this.handleNext,\n          title: \"Next Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 4\n      }, this);\n    };\n\n    this.renderDayLabel = (day, index) => {\n      const daylabel = WEEK_DAYS[day].toUpperCase();\n      return /*#__PURE__*/_jsxDEV(Styled.CalendarDay, {\n        index: index,\n        children: daylabel\n      }, daylabel, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 4\n      }, this);\n    };\n\n    this.renderCalendarDate = (date, index) => {\n      const {\n        current,\n        month,\n        year,\n        today\n      } = this.state;\n\n      let _date = new Date(date.join(\"-\"));\n\n      const isToday = isSameDay(_date, today);\n      const isCurrent = current && isSameDay(_date, current);\n      const inMonth = month && year && isSameMonth(_date, new Date([year, month, 1].join(\"-\")));\n      const onClick = this.gotoDate(_date);\n      const props = {\n        index,\n        inMonth,\n        onClick,\n        title: _date.toDateString(),\n        cal: this.props.cal\n      };\n      const DateComponent = isCurrent ? Styled.HighlightedCalendarDate : isToday ? Styled.TodayCalendarDate : Styled.CalendarDate;\n      const Price = Styled.Price;\n      let cal = this.props.cal[\"cal_vals\"];\n      let d = getDateISO(_date);\n      cal = cal[d];\n      return /*#__PURE__*/_jsxDEV(DateComponent, { ...props,\n        children: [_date.getDate(), /*#__PURE__*/_jsxDEV(Price, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: cal !== undefined && (cal[\"balance\"] / 1000000).toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\") + \"M\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: cal !== undefined && cal[\"price\"] !== undefined && \"$\".concat(cal[\"price\"].toFixed(2))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 6\n          }, this)\n        }, d, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 5\n        }, this)]\n      }, d, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 4\n      }, this);\n    };\n  }\n\n  resolveStateFromDate(date) {\n    const isDateObject = isDate(date);\n\n    const _date = isDateObject ? date : new Date();\n\n    return {\n      current: isDateObject ? date : null,\n      month: +_date.getMonth() + 1,\n      year: _date.getFullYear()\n    };\n  }\n\n  resolveStateFromProp() {\n    return this.resolveStateFromDate(this.props.date);\n  }\n\n  componentDidMount() {\n    const now = new Date();\n    const tomorrow = new Date().setHours(0, 0, 0, 0) + 24 * 60 * 60 * 1000;\n    const ms = tomorrow - now;\n    this.dayTimeout = setTimeout(() => {\n      this.setState({\n        today: new Date()\n      }, this.clearDayTimeout);\n    }, ms);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      date,\n      onDateChanged\n    } = this.props;\n    const {\n      date: prevDate\n    } = prevProps;\n    const dateMatch = date === prevDate || isSameDay(date, prevDate);\n    !dateMatch && this.setState(this.resolveStateFromDate(date), () => {\n      typeof onDateChanged === \"function\" && onDateChanged(date);\n    });\n  }\n\n  componentWillUnmount() {\n    this.clearPressureTimer();\n    this.clearDayTimeout();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.CalContainer,\n      children: [this.renderMonthAndYear(), /*#__PURE__*/_jsxDEV(Styled.CalendarGrid, {\n        children: [/*#__PURE__*/_jsxDEV(Fragment, {\n          children: Object.keys(WEEK_DAYS).map(this.renderDayLabel)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Fragment, {\n          children: this.getCalendarDates().map(this.renderCalendarDate)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nCalendar.propTypes = {\n  date: PropTypes.instanceOf(Date),\n  onDateChanged: PropTypes.func\n};\nexport default Calendar;","map":{"version":3,"sources":["/Users/chase/Desktop/CryptoProjects/CryptoCount-v2/frontend/src/components/Calendar/Calendar.js"],"names":["React","Component","Fragment","PropTypes","classes","Styled","calendar","isDate","isSameDay","isSameMonth","getDateISO","getNextMonth","getPreviousMonth","WEEK_DAYS","CALENDAR_MONTHS","Calendar","state","resolveStateFromProp","today","Date","getCalendarDates","current","month","year","calendarMonth","getMonth","calendarYear","getFullYear","gotoDate","date","evt","preventDefault","onDateChanged","props","setState","resolveStateFromDate","gotoPreviousMonth","gotoNextMonth","gotoPreviousYear","gotoNextYear","handlePressure","fn","pressureTimeout","setTimeout","pressureTimer","setInterval","clearPressureTimer","clearInterval","clearTimeout","clearDayTimeout","dayTimeout","handlePrevious","e","shiftKey","handleNext","renderMonthAndYear","monthname","Object","keys","Math","max","min","renderDayLabel","day","index","daylabel","toUpperCase","renderCalendarDate","_date","join","isToday","isCurrent","inMonth","onClick","title","toDateString","cal","DateComponent","HighlightedCalendarDate","TodayCalendarDate","CalendarDate","Price","d","getDate","undefined","toFixed","replace","concat","isDateObject","componentDidMount","now","tomorrow","setHours","ms","componentDidUpdate","prevProps","prevDate","dateMatch","componentWillUnmount","render","CalContainer","map","propTypes","instanceOf","func"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classes from \"./Calendar.module.css\";\nimport * as Styled from \"./styles\";\nimport calendar, {\n\tisDate,\n\tisSameDay,\n\tisSameMonth,\n\tgetDateISO,\n\tgetNextMonth,\n\tgetPreviousMonth,\n\tWEEK_DAYS,\n\tCALENDAR_MONTHS,\n} from \"../../helpers/calendar\";\n\nclass Calendar extends Component {\n\tstate = { ...this.resolveStateFromProp(), today: new Date() };\n\n\tresolveStateFromDate(date) {\n\t\tconst isDateObject = isDate(date);\n\t\tconst _date = isDateObject ? date : new Date();\n\t\treturn {\n\t\t\tcurrent: isDateObject ? date : null,\n\t\t\tmonth: +_date.getMonth() + 1,\n\t\t\tyear: _date.getFullYear(),\n\t\t};\n\t}\n\n\tresolveStateFromProp() {\n\t\treturn this.resolveStateFromDate(this.props.date);\n\t}\n\n\tgetCalendarDates = () => {\n\t\tconst { current, month, year } = this.state;\n\t\tconst calendarMonth = month || +current.getMonth() + 1;\n\t\tconst calendarYear = year || current.getFullYear();\n\n\t\treturn calendar(calendarMonth, calendarYear);\n\t};\n\n\tgotoDate = (date) => (evt) => {\n\t\tevt && evt.preventDefault();\n\t\tconst { current } = this.state;\n\t\tconst { onDateChanged } = this.props;\n\n\t\t!(current && isSameDay(date, current)) &&\n\t\t\tthis.setState(this.resolveStateFromDate(date), () => {\n\t\t\t\ttypeof onDateChanged === \"function\" && onDateChanged(date);\n\t\t\t});\n\t};\n\n\tgotoPreviousMonth = () => {\n\t\tconst { month, year } = this.state;\n\t\tthis.setState(getPreviousMonth(month, year));\n\t};\n\n\tgotoNextMonth = () => {\n\t\tconst { month, year } = this.state;\n\t\tthis.setState(getNextMonth(month, year));\n\t};\n\n\tgotoPreviousYear = () => {\n\t\tconst { year } = this.state;\n\t\tthis.setState({ year: year - 1 });\n\t};\n\n\tgotoNextYear = () => {\n\t\tconst { year } = this.state;\n\t\tthis.setState({ year: year + 1 });\n\t};\n\n\thandlePressure = (fn) => {\n\t\tif (typeof fn === \"function\") {\n\t\t\tfn();\n\t\t\tthis.pressureTimeout = setTimeout(() => {\n\t\t\t\tthis.pressureTimer = setInterval(fn, 100);\n\t\t\t}, 500);\n\t\t}\n\t};\n\n\tclearPressureTimer = () => {\n\t\tthis.pressureTimer && clearInterval(this.pressureTimer);\n\t\tthis.pressureTimeout && clearTimeout(this.pressureTimeout);\n\t};\n\n\tclearDayTimeout = () => {\n\t\tthis.dayTimeout && clearTimeout(this.dayTimeout);\n\t};\n\n\thandlePrevious = (e) => {\n\t\te.shiftKey ? this.gotoPreviousYear() : this.gotoPreviousMonth();\n\t\te.preventDefault();\n\t};\n\n\thandleNext = (e) => {\n\t\te.shiftKey ? this.gotoNextYear() : this.gotoNextMonth();\n\t\te.preventDefault();\n\t};\n\n\trenderMonthAndYear = () => {\n\t\tconst { month, year } = this.state;\n\t\tconst monthname = Object.keys(CALENDAR_MONTHS)[\n\t\t\tMath.max(0, Math.min(month - 1, 11))\n\t\t];\n\n\t\treturn (\n\t\t\t<Styled.CalendarHeader>\n\t\t\t\t<Styled.ArrowLeft\n\t\t\t\t\tonClick={this.handlePrevious}\n\t\t\t\t\ttitle=\"Previous Month\"\n\t\t\t\t/>\n\t\t\t\t<Styled.CalendarMonth>\n\t\t\t\t\t{monthname} {year}\n\t\t\t\t</Styled.CalendarMonth>\n\t\t\t\t<Styled.ArrowRight\n\t\t\t\t\tonClick={this.handleNext}\n\t\t\t\t\ttitle=\"Next Month\"\n\t\t\t\t/>\n\t\t\t</Styled.CalendarHeader>\n\t\t);\n\t};\n\n\trenderDayLabel = (day, index) => {\n\t\tconst daylabel = WEEK_DAYS[day].toUpperCase();\n\t\treturn (\n\t\t\t<Styled.CalendarDay key={daylabel} index={index}>\n\t\t\t\t{daylabel}\n\t\t\t</Styled.CalendarDay>\n\t\t);\n\t};\n\n\trenderCalendarDate = (date, index) => {\n\t\tconst { current, month, year, today } = this.state;\n\t\tlet _date = new Date(date.join(\"-\"));\n\t\tconst isToday = isSameDay(_date, today);\n\t\tconst isCurrent = current && isSameDay(_date, current);\n\t\tconst inMonth =\n\t\t\tmonth &&\n\t\t\tyear &&\n\t\t\tisSameMonth(_date, new Date([year, month, 1].join(\"-\")));\n\n\t\tconst onClick = this.gotoDate(_date);\n\n\t\tconst props = {\n\t\t\tindex,\n\t\t\tinMonth,\n\t\t\tonClick,\n\t\t\ttitle: _date.toDateString(),\n\t\t\tcal: this.props.cal,\n\t\t};\n\n\t\tconst DateComponent = isCurrent\n\t\t\t? Styled.HighlightedCalendarDate\n\t\t\t: isToday\n\t\t\t? Styled.TodayCalendarDate\n\t\t\t: Styled.CalendarDate;\n\n\t\tconst Price = Styled.Price;\n\n\t\tlet cal = this.props.cal[\"cal_vals\"];\n\t\tlet d = getDateISO(_date);\n\t\tcal = cal[d];\n\t\treturn (\n\t\t\t<DateComponent key={d} {...props}>\n\t\t\t\t{_date.getDate()}\n\t\t\t\t<Price key={d}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{cal !== undefined &&\n\t\t\t\t\t\t\t\t(cal[\"balance\"] / 1000000)\n\t\t\t\t\t\t\t\t\t.toFixed(2)\n\t\t\t\t\t\t\t\t\t.replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\") +\n\t\t\t\t\t\t\t\t\t\"M\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{cal !== undefined &&\n\t\t\t\t\t\t\t\tcal[\"price\"] !== undefined &&\n\t\t\t\t\t\t\t\t\"$\".concat(cal[\"price\"].toFixed(2))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Price>\n\t\t\t</DateComponent>\n\t\t);\n\t};\n\n\tcomponentDidMount() {\n\t\tconst now = new Date();\n\t\tconst tomorrow = new Date().setHours(0, 0, 0, 0) + 24 * 60 * 60 * 1000;\n\t\tconst ms = tomorrow - now;\n\n\t\tthis.dayTimeout = setTimeout(() => {\n\t\t\tthis.setState({ today: new Date() }, this.clearDayTimeout);\n\t\t}, ms);\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { date, onDateChanged } = this.props;\n\t\tconst { date: prevDate } = prevProps;\n\t\tconst dateMatch = date === prevDate || isSameDay(date, prevDate);\n\n\t\t!dateMatch &&\n\t\t\tthis.setState(this.resolveStateFromDate(date), () => {\n\t\t\t\ttypeof onDateChanged === \"function\" && onDateChanged(date);\n\t\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.clearPressureTimer();\n\t\tthis.clearDayTimeout();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={classes.CalContainer}>\n\t\t\t\t{this.renderMonthAndYear()}\n\n\t\t\t\t<Styled.CalendarGrid>\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{Object.keys(WEEK_DAYS).map(this.renderDayLabel)}\n\t\t\t\t\t</Fragment>\n\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{this.getCalendarDates().map(this.renderCalendarDate)}\n\t\t\t\t\t</Fragment>\n\t\t\t\t</Styled.CalendarGrid>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nCalendar.propTypes = {\n\tdate: PropTypes.instanceOf(Date),\n\tonDateChanged: PropTypes.func,\n};\n\nexport default Calendar;\n"]},"metadata":{},"sourceType":"module"}